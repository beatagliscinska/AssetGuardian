{% extends "base.html" %}
{% load crispy_forms_tags %}


{% block content %}
  <div class="assets-list-header">
    <h2>Assets List</h2>
    <p>Explore and manage all assets available.</p>
  </div>

  <form method="get" class="form-inline">
    {% csrf_token %}
    {{ filter.form|crispy }}
    <button type="submit" class="btn btn-primary">Apply Filter</button>
  </form>

  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Asset Number</th>
        <th>Description</th>
        <th>Category</th>
        <th>Value</th>
        <th>Purchase Date</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      {% for asset in filter.qs %}
      <tr onmouseover="this.style.backgroundColor='#f5f5f5'" onmouseout="this.style.backgroundColor=''">
        <td>{{ asset.asset_number }}</td>
        <td>{{ asset.description }}</td>
        <td>{{ asset.category.name }}</td>
        <td>{{ asset.value }} PLN</td>
        <td>{{ asset.purchase_date }}</td>
        <td>
          <button type="submit" class="btn btn-info btn-sm" onclick="updateAsset(this)" data-id="{{ asset.id }}"> Update </button>
          <button type="button" class="btn btn-warning btn-sm" onclick="deleteAsset(this)" data-id="{{ asset.id }}">Delete</button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <script>
    function deleteAsset(button) {
      var assetId = button.getAttribute("data-id");
      window.location.href = "/asset/" + assetId + "/delete/";
    }
    function updateAsset(button) {
      var assetId = button.getAttribute("data-id");
      window.location.href = "/asset/" + assetId + "/update/";
    }
  </script>
{% endblock %}